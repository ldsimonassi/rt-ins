<% provide(:title, "Cloudfleet - Reporte de gestión de: #{@driver.name}") %>

<div id="page-wrapper" style="min-height: 1094px">

	<div class="row">
		<div class="col-lg-12"><h1>Reporte de gestión de: <%= @driver.name %></h1></div>
	</div>

	<div class="row">
	    <div class="col-md-8">
	        <div class="panel panel-default">
	            <div class="panel-heading">
	                <i class="fa fa-map" ></i>  Reporte:
					<br/>
					<br/>
					<div class="dropdown">
					  <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
					    Período
					    <span class="caret"></span>
					  </button>
					  <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
					    <li><a href="#">Últimas 24hs</a></li>
					    <li><a href="#">Ayer</a></li>
					    <li role="separator" class="divider"></li>
						<li><a href="#">Últimos 7 días</a></li>
					    <li><a href="#">Últimos 30 días</a></li>
					  </ul>
					</div>
					<div class="row">
						<div class="col-md-6">
							<h4><b>Conductor:</b> <%= @driver.name%></h4>
							<h4><b>Período:</b> <%= @from_s%> - <%= @to_s%> </h4>
							<h4><b>Distancia recorrida:</b> <%= 234%>Km</h4>
						</div>
						<div class="col-md-6">
							<h4><b>Vel Maxima:</b> <%= 140%>Km/h</h4>
							<h4><b>Quejas:</b> 2 </h4>
							<h4><b>Alertas:</b>	 23<%= 234%>Km</h4>
						</div>
					</div>
					<br/>
	            </div>
	        </div>
	    </div>
	    <div class="col-md-4">
	        <div class="panel panel-default">
	            <div class="panel-heading">
	                <i class="fa fa-bell fa-fw"></i> Incidencias graves
	            </div>
	        </div>
	    </div>
	</div>


	<div class="row">
	    <div class="col-xs-12">
	        <div class="panel panel-default">
	            <div class="panel-heading">
	                <i class="fa fa-map" ></i>  Velocidades:
					<canvas id="distances" width="400" height="200"></canvas>
	            </div>
	        </div>
	    </div>
	</div>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.1.6/Chart.bundle.js"></script>
	<script type="text/javascript">
		var data = <%= raw @tracks.to_json %>;
		var ctx = $("#distances");

		function draw_chart() {
			var myChart = new Chart(ctx, {
			    type: 'bar',
			    data: {
			        labels: ["1:00" , "2:00" , "3:00" , "4:00" , 
			        		 "5:00" , "6:00" , "7:00" , "8:00" , 
			        		 "9:00" , "10:00", "11:00", "12:00", 
			        		 "13:00", "14:00", "15:00", "16:00", 
			        		 "17:00", "18:00", "19:00", "20:00", 
			        		 "21:00", "22:00", "23:00"],
			        datasets: [{
			            label: 'Velocidad máxima (Km/h)',
			            data: [12, 19, 3, 5, 2, 3],
			            borderWidth: 1
			        }, 
			        {
			            label: 'Distancia recorrida (Km)',
			            data: [3, 4, 11, 7, 3, 8],
			            borderWidth: 1
			        },
			        {
			            label: 'Tiempo manejado (Hs)',
			            data: [3, 4, 11, 7, 3, 8],
			            borderWidth: 1
			        }]
			    },
			    options: {
			        scales: {
			            yAxes: [{
			                ticks: {
			                    beginAtZero:true
			                }
			            }]
			        }
			    }
			});
		}
		draw_chart();
	</script>
</div>

